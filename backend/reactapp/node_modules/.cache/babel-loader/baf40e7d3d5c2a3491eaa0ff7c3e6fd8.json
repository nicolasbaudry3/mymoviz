{"ast":null,"code":"var _jsxFileName = \"/Users/nicolas/lacapsule/project/mymoviz/part5/backend/reactapp/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { Container, Row, Button, Nav, NavItem, NavLink, Popover, PopoverHeader, PopoverBody, ListGroup, ListGroupItem, ListGroupItemText } from 'reactstrap';\nimport Movie from './components/Movie';\n\nfunction App() {\n  const [moviesCount, setMoviesCount] = useState(0);\n  const [moviesWishList, setMoviesWishList] = useState([]);\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [moviesList, setMoviesList] = useState([]);\n\n  const toggle = () => setPopoverOpen(!popoverOpen); // -- communication backend-- //\n\n\n  useEffect(() => {\n    async function loadData() {\n      var rawResponse = await fetch('/new-movies');\n      var response = await rawResponse.json();\n      console.log(response);\n      setMoviesList(response.movies);\n    }\n\n    loadData();\n  }, []);\n\n  var handleClickAddMovie = (name, img) => {\n    async function movieData() {\n      setMoviesCount(moviesCount + 1);\n      setMoviesWishList([...moviesWishList, {\n        name: name,\n        img: img\n      }]);\n      await fetch('/wishlist-movie', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: 'name=Terminator&img=./reactapp/public/terminator.jpg'\n      });\n    }\n\n    movieData();\n  };\n\n  var handleClickDeleteMovie = name => {\n    setMoviesCount(moviesCount - 1);\n    setMoviesWishList(moviesWishList.filter(object => object.name != name));\n  };\n\n  var cardWish = moviesWishList.map((movie, i) => {\n    return React.createElement(ListGroupItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(ListGroupItemText, {\n      onClick: () => {\n        handleClickDeleteMovie(movie.name);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      width: \"25%\",\n      src: movie.img,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), \" \", movie.name));\n  }); // var moviesData = [\n  //   {name:\"Star Wars : L'ascension de Skywalker\", desc:\"La conclusion de la saga Skywalker. De nouvelles légendes vont naître dans cette ...\", img:\"/starwars.jpg\", note:6.7, vote:5},\n  //   {name:\"Maléfique : Le pouvoir du mal\", desc: \"Plusieurs années après avoir découvert pourquoi la plus célèbre méchante Disney avait un cœur ...\", img:\"/maleficent.jpg\", note:8.2, vote:3},\n  //   {name:\"Jumanji: The Next Level\", desc: \"L’équipe est de retour, mais le jeu a changé. Alors qu’ils retournent dans Jumanji pour secourir ...\", img:\"/jumanji.jpg\", note:4, vote:5},\n  //   {name:\"Once Upon a Time... in Hollywood\", desc: \"En 1969, Rick Dalton – star déclinante d'une série télévisée de western – et Cliff Booth ...\", img:\"/once_upon.jpg\", note:6, vote:7},\n  //   {name:\"La Reine des neiges 2\", desc: \"Elsa, Anna, Kristoff, Olaf et Sven voyagent bien au-delà des portes d’Arendelle à la recherche de réponses ...\", img:\"/frozen.jpg\", note:4.6, vote:3},\n  //   {name:\"Terminator: Dark Fate\", desc: \"De nos jours à Mexico. Dani Ramos, 21 ans, travaille sur une chaîne de montage dans une usine automobile...\", img:\"/terminator.jpg\", note:6.1, vote:1},\n  // ]\n\n  var movieList = moviesList.map((movie, i) => {\n    var result = moviesWishList.find(element => element.name == movie.title);\n    var isSee = false;\n\n    if (result != undefined) {\n      isSee = true;\n    }\n\n    var overview = movie.overview;\n    console.log(overview);\n\n    if (movie.overview.length >= 80) {\n      overview = movie.overview.slice(0, 80) + \"...\";\n      return React.createElement(Movie, {\n        key: i,\n        movieSee: isSee,\n        handleClickDeleteMovieParent: handleClickDeleteMovie,\n        handleClickAddMovieParent: handleClickAddMovie,\n        movieName: movie.title,\n        movieDesc: overview,\n        movieImg: 'https://image.tmdb.org/t/p/w500/' + movie.poster_path,\n        globalRating: movie.popularity,\n        globalCountRating: movie.vote_count,\n        movieNote: movie.popularity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      });\n    }\n  });\n  return React.createElement(\"div\", {\n    style: {\n      backgroundColor: \"#232528\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"navbar-brand\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"./logo.png\",\n    width: \"30\",\n    height: \"30\",\n    className: \"d-inline-block align-top\",\n    alt: \"logo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  })), React.createElement(NavItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Last Releases\")), React.createElement(NavItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(Button, {\n    id: \"Popover1\",\n    type: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, moviesCount, \" films\"), React.createElement(Popover, {\n    placement: \"bottom\",\n    isOpen: popoverOpen,\n    target: \"Popover1\",\n    toggle: toggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(PopoverHeader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"WishList\"), React.createElement(PopoverBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(ListGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, cardWish)))))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, movieList)));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/nicolas/lacapsule/project/mymoviz/part5/backend/reactapp/src/App.js"],"names":["React","useState","useEffect","Container","Row","Button","Nav","NavItem","NavLink","Popover","PopoverHeader","PopoverBody","ListGroup","ListGroupItem","ListGroupItemText","Movie","App","moviesCount","setMoviesCount","moviesWishList","setMoviesWishList","popoverOpen","setPopoverOpen","moviesList","setMoviesList","toggle","loadData","rawResponse","fetch","response","json","console","log","movies","handleClickAddMovie","name","img","movieData","method","headers","body","handleClickDeleteMovie","filter","object","cardWish","map","movie","i","movieList","result","find","element","title","isSee","undefined","overview","length","slice","poster_path","popularity","vote_count","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport { \n  Container,\n  Row,\n  Button,\n  Nav,\n  NavItem,\n  NavLink,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  ListGroup,\n  ListGroupItem,\n  ListGroupItemText,\n\n } from 'reactstrap';\n\nimport Movie from './components/Movie'\n\nfunction App() {\n\n  const [moviesCount,setMoviesCount] = useState(0)\n  const [moviesWishList, setMoviesWishList] = useState([])\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [moviesList, setMoviesList] = useState([]);\n  \n  \n  const toggle = () => setPopoverOpen(!popoverOpen);\n\n  // -- communication backend-- //\n  useEffect( () => {\n    async function loadData() {\n      var rawResponse = await fetch('/new-movies');\n      var response = await rawResponse.json();\n      console.log(response);\n      setMoviesList(response.movies);\n    }\n    loadData();\n  }, []);\n\n  \n    \n  var handleClickAddMovie = (name, img) => {\n    async function movieData() {\n    setMoviesCount(moviesCount+1)\n    setMoviesWishList([...moviesWishList, {name:name,img:img}])\n    await fetch('/wishlist-movie', {\n      method: 'POST',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n      body: 'name=Terminator&img=./reactapp/public/terminator.jpg'\n    });\n  }\n  movieData();\n  }\n\n  var handleClickDeleteMovie = (name) => {\n    setMoviesCount(moviesCount-1)\n    setMoviesWishList(moviesWishList.filter(object => object.name != name))\n  }\n\n  var cardWish = moviesWishList.map((movie,i) => {\n    return (\n      <ListGroupItem>\n        <ListGroupItemText onClick={() => {handleClickDeleteMovie(movie.name)}}>\n        <img width=\"25%\" src={movie.img} /> {movie.name}\n        </ListGroupItemText>\n      </ListGroupItem>\n    )\n  })\n\n  // var moviesData = [\n  //   {name:\"Star Wars : L'ascension de Skywalker\", desc:\"La conclusion de la saga Skywalker. De nouvelles légendes vont naître dans cette ...\", img:\"/starwars.jpg\", note:6.7, vote:5},\n  //   {name:\"Maléfique : Le pouvoir du mal\", desc: \"Plusieurs années après avoir découvert pourquoi la plus célèbre méchante Disney avait un cœur ...\", img:\"/maleficent.jpg\", note:8.2, vote:3},\n  //   {name:\"Jumanji: The Next Level\", desc: \"L’équipe est de retour, mais le jeu a changé. Alors qu’ils retournent dans Jumanji pour secourir ...\", img:\"/jumanji.jpg\", note:4, vote:5},\n  //   {name:\"Once Upon a Time... in Hollywood\", desc: \"En 1969, Rick Dalton – star déclinante d'une série télévisée de western – et Cliff Booth ...\", img:\"/once_upon.jpg\", note:6, vote:7},\n  //   {name:\"La Reine des neiges 2\", desc: \"Elsa, Anna, Kristoff, Olaf et Sven voyagent bien au-delà des portes d’Arendelle à la recherche de réponses ...\", img:\"/frozen.jpg\", note:4.6, vote:3},\n  //   {name:\"Terminator: Dark Fate\", desc: \"De nos jours à Mexico. Dani Ramos, 21 ans, travaille sur une chaîne de montage dans une usine automobile...\", img:\"/terminator.jpg\", note:6.1, vote:1},\n  // ]\n\n      var movieList = moviesList.map((movie,i) => {\n      var result = moviesWishList.find(element => element.name == movie.title)\n      var isSee = false\n        if(result != undefined){\n        isSee = true\n        }\n\n      var overview = movie.overview;\n        console.log(overview);\n        if(movie.overview.length >= 80){\n          overview = movie.overview.slice(0,80)+\"...\";\n\n        return(<Movie key={i} movieSee={isSee} handleClickDeleteMovieParent={handleClickDeleteMovie} handleClickAddMovieParent={handleClickAddMovie} movieName={movie.title} movieDesc={overview} movieImg={'https://image.tmdb.org/t/p/w500/'+movie.poster_path} globalRating={movie.popularity} globalCountRating={movie.vote_count} movieNote={movie.popularity} />)\n        \n        }\n      })\n\n    \n\n  return (\n    <div style={{backgroundColor:\"#232528\"}}>\n      <Container>\n        <Nav>\n          <span className=\"navbar-brand\">\n            <img src=\"./logo.png\" width=\"30\" height=\"30\" className=\"d-inline-block align-top\" alt=\"logo\" />\n          </span>\n          <NavItem>\n            <NavLink style={{color:'white'}}>Last Releases</NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink>\n              <Button id=\"Popover1\"  type=\"button\">{moviesCount} films</Button>\n              <Popover placement=\"bottom\" isOpen={popoverOpen} target=\"Popover1\" toggle={toggle}>\n                <PopoverHeader>WishList</PopoverHeader>\n                <PopoverBody>\n                <ListGroup>\n                {cardWish}\n                </ListGroup>\n                </PopoverBody>\n              </Popover>\n            </NavLink>\n          </NavItem>\n        </Nav>\n        <Row>\n          {movieList}\n        </Row>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}